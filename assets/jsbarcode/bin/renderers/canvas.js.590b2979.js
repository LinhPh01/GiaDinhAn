import{c as f}from"./canvas.js_commonjs-exports.e13fb7e5.js";import"../help/merge.js.9139ed05.js";import"./shared.js.5aa70857.js";import{s as c}from"./shared.js_commonjs-exports.e2a6a0a9.js";import{m as g}from"../help/merge.js_commonjs-exports.abdf0267.js";Object.defineProperty(f,"__esModule",{value:!0});var d=function(){function i(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n}}(),o=g,u=m(o),l=c;function m(i){return i&&i.__esModule?i:{default:i}}function C(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}var x=function(){function i(n,e,t){C(this,i),this.canvas=n,this.encodings=e,this.options=t}return d(i,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,u.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,l.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,l.getTotalWidthOfEncodings)(this.encodings),a=(0,l.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=a,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var a=this.canvas.getContext("2d"),h=t.data,s;e.textPosition=="top"?s=e.marginTop+e.fontSize+e.textMargin:s=e.marginTop,a.fillStyle=e.lineColor;for(var r=0;r<h.length;r++){var v=r*e.width+t.barcodePadding;h[r]==="1"?a.fillRect(v,s,e.width,e.height):h[r]&&a.fillRect(v,s,e.width,e.height*h[r])}}},{key:"drawCanvasText",value:function(e,t){var a=this.canvas.getContext("2d"),h=e.fontOptions+" "+e.fontSize+"px "+e.font;if(e.displayValue){var s,r;e.textPosition=="top"?r=e.marginTop+e.fontSize-e.textMargin:r=e.height+e.textMargin+e.marginTop+e.fontSize,a.font=h,e.textAlign=="left"||t.barcodePadding>0?(s=0,a.textAlign="left"):e.textAlign=="right"?(s=t.width-1,a.textAlign="right"):(s=t.width/2,a.textAlign="center"),a.fillText(t.text,s,r)}}},{key:"moveCanvasDrawing",value:function(e){var t=this.canvas.getContext("2d");t.translate(e.width,0)}},{key:"restoreCanvas",value:function(){var e=this.canvas.getContext("2d");e.restore()}}]),i}();f.default=x;
