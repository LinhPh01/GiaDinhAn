import{_ as ve}from"../../../../@babel/runtime/helpers/esm/extends.js.a0837302.js";import{_ as de}from"../../../../@babel/runtime/helpers/esm/defineProperty.js.55a495d7.js";import{R as ge}from"../../../../react/index.js.1d37a627.js";import{u as pe}from"../../../../@use-gesture/react/dist/use-gesture-react.esm.js.7c50c211.js";import{c as he}from"../../../../clsx/dist/clsx.m.js.babdd28a.js";import{a as ye}from"../../../../@react-spring/web/dist/react-spring-web.esm.js.d8f42ad9.js";import{g as be}from"../../utils/class.js.5fbce117.js";import{A as U,D as Y}from"./utils/constants.js.e0241947.js";import{u as Ae}from"./hooks/useElementSize.js.1f7b4753.js";import{j as S}from"../../../../swiper/swiper-react.mjs.93858f02.js";import{c as Pe,u as Se,t as we}from"../../../../@react-spring/core/dist/react-spring-core.esm.js.0cb3ad7a.js";import{r as s}from"../../../../react/index.js_commonjs-module.36a72f64.js";function q(e,u){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);u&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var u=1;u<arguments.length;u++){var n=arguments[u]!=null?arguments[u]:{};u%2?q(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Oe=s.exports.forwardRef(function(e,u){var n,r=e.title,i=e.visible,w=e.onVisibleChanged,H=e.handler,T=H===void 0?!0:H,B=e.children,E=e.autoHeight,F=E===void 0?!1:E,J=e.contentRef,N=e.onClose,Q=e.swipeToClose,W=e.style,_=e.height,g=e.snapPoints,$=e.defaultSnapPoint,O=$===void 0?0:$,p=e.onSnap,X=s.exports.useRef(),I=s.exports.useState(O),a=I[0],h=I[1],y=s.exports.useRef(),l=Ae({ref:y}),V=s.exports.useState({movement:[0,0],down:!1,first:!1,vy:0}),x=V[0],Z=V[1],ee=function(){if(!!g&&!!l)return typeof g=="function"?g({sheetModalHeight:l}):g.map(function(t){return t*l})},o=ee(),L=s.exports.useRef(!1),c=be("sheet-content");s.exports.useImperativeHandle(J,function(){return y.current});var b=x.down,M=x.movement,te=x.vy,ne=function(t){var A=t.visible,P=t.points,D=t.currentPoint,j=t.down;return j?0:!A||!P||D===P.length-1?U:void 0},re=d(d({},Pe.stiff),{},{duration:ne({visible:i,points:o,currentPoint:a,down:b}),velocity:te}),k=Se(function(){return{transformAmount:l||window.innerHeight,movingAmount:0,config:d({},re)}}),z=k[0],oe=z.transformAmount,ie=z.movingAmount,m=k[1],ae=function(t){h(t)},se=he(c,(n={},n[c+"-hug-content"]=F,n));s.exports.useImperativeHandle(u,function(){return{sheet:y.current,snapTo:ae}}),s.exports.useEffect(function(){b||(i&&o?m.start({transformAmount:o[a||0],movingAmount:0}):i&&l?m.start({transformAmount:0,movingAmount:0}):i||m.start({transformAmount:l||window.innerHeight,movingAmount:0}))},[i,a,l]),s.exports.useLayoutEffect(function(){L.current&&setTimeout(function(){w==null||w(!!i)},U),!i&&o&&o.length&&a!==O&&h(O),L.current=!!i},[i,w]),s.exports.useEffect(function(){b&&m.set({movingAmount:M[1]})},[b,M,m]);var ue=function(t){var A=t.down,P=t.first,D=t.velocity,j=D[1],C=t.movement,ce=t.event,R=t.memo;if(Z({down:A,movement:C,first:P,vy:j}),A)return C[1];var f=C[1];return R&&R<0&&!f&&(f=R),f<0&&f<-Y&&o?(a<o.length-1?(p==null||p(a+1),h(a+1)):o||m.start({transformAmount:0,movingAmount:0}),f):f>0&&f>Y?(o&&a>0?(p==null||p(a-1),h(a-1)):N==null||N(ce),f):(o?m.start({transformAmount:o[a],movingAmount:0}):m.start({transformAmount:0,movingAmount:0}),f)},G=pe(ue,{filterTaps:!0}),fe=we([oe,ie],function(v,t){return v+t<0?"":"translateY("+(v+t)+"px)"}),me=S("div",{className:c+"-header",children:S("div",{className:c+"-title",children:r})}),le=S("div",{ref:X,className:c+"-handler-wrapper",...G(),children:S("span",{className:c+"-handler"})}),K=d({},W||{});return _&&(K.height=_),ge.createElement(ye.div,ve({style:d(d({},K),{},{transform:fe})},!T&&(Q||o)?G():{},{className:se,ref:y}),T&&le,r&&me,B)}),Ve=Oe;export{Ve as C};
