import{t as s}from"../external/@swc/helpers/src/_async_to_generator.mjs.js.ae57f58a.js";import{M as l,o as u}from"../external/zod/lib/index.mjs.js.08a2fb75.js";import{o as m}from"../appEnv/index.js.2da42b7a.js";import{o as f}from"../common/notFound.js.5b77983b.js";import{e as c}from"../utils/decorator.js.bf74d679.js";import{c as v}from"../common/apis/general/getUserInfo.js.443ae789.js";import{e as p}from"../external/tslib/tslib.es6.js.20b0ea63.js";var g=[l({avatarType:u.enum(["small","normal","large"]).optional(),autoRequestPermission:u.boolean().default(!1).optional()}).optional()];function q(e){return t.apply(this,arguments)}function t(){return t=s(function(e){return p(this,function(h){return[2,c("getUserInfo",g,[e],(o=s(function(r){var n,a;return p(this,function(i){switch(i.label){case 0:return m.isMp?(n=r==null?void 0:r.avatarType,a=r==null?void 0:r.autoRequestPermission,[4,v(n,a)]):[3,2];case 1:return[2,{userInfo:i.sent()}];case 2:return m.isMpWeb?[2,Promise.resolve({userInfo:{id:"3368637342326461234",name:"User Name",avatar:"https://h5.zdn.vn/static/images/avatar.png"}})]:[2,Promise.reject(f("getUserInfo",{}))]}})}),function(r){return o.apply(this,arguments)}))];var o})}),t.apply(this,arguments)}export{q as u};
