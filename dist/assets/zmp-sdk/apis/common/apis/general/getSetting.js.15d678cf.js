import{t as u}from"../../../external/@swc/helpers/src/_async_to_generator.mjs.js.ae57f58a.js";import{t as l}from"../../../external/@swc/helpers/src/_object_spread.mjs.js.864104b0.js";import{R as g,s as w,o as d}from"../../../constants.js.9c557f4a.js";import{A as f}from"../../token.js.8e734816.js";import{n as p}from"../../../utils/errorHandler.js.2edec4c2.js";import{e as a}from"../../../external/tslib/tslib.es6.js.20b0ea63.js";var h,T=(h=u(function(i){var r;return a(this,function(t){switch(t.label){case 0:return r={headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:"Bearer ".concat(i)}},[4,fetch(d.GET_AUTH_SETTING,l({method:"GET"},r))];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}})}),function(i){return h.apply(this,arguments)}),R=u(function(){return a(this,function(i){return[2,new Promise((r=u(function(t,o){var s,c,e,m;return a(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,f.jumpAndGetToken()];case 1:return n.sent(),(c=(s=f.miniProgramConfig)===null||s===void 0?void 0:s.jwt)||o(new p(g.UNAUTHORIZED,w.LOGIN_REQUIRED,"getSetting")),[4,T(c)];case 2:return(e=n.sent())&&e.err===0?t({authSetting:e.data}):o(new p(e.err,e.msg,"getSetting")),[3,4];case 3:return m=n.sent(),o(m),[3,4];case 4:return[2]}})}),function(t,o){return r.apply(this,arguments)}))];var r})});export{R as m};
