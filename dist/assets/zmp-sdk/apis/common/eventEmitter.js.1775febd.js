import{a as d}from"../external/@swc/helpers/src/_class_call_check.mjs.js.fca3aa24.js";import{r as f}from"../external/@swc/helpers/src/_get.mjs.js.eae47040.js";import{e as m}from"../external/@swc/helpers/src/_get_prototype_of.mjs.js.f66657bc.js";import{e as C}from"../external/@swc/helpers/src/_inherits.mjs.js.a8514456.js";import{s as y}from"../external/@swc/helpers/src/_create_super.mjs.js.f0e7f908.js";import{n as I}from"../external/eventemitter3/index.js.fc21c879.js";import{n as v}from"../utils/debug.js.6107acba.js";import{f as w}from"../utils/common.js.6eb930ef.js";import{T as z}from"../constants.js.9c557f4a.js";import{o as h}from"../types/enum.js.df3937d6.js";var u="ACTION_CALLBACK",l=function(a){C(n,a);var o=y(n);function n(){var t;return d(this,n),(t=o.apply(this,arguments)).debug=v("zmp:event-emitter"),t}var c=n.prototype;return c.h5ConfirmHandleEvent=function(t,r,e){ZaloJavaScriptInterface.jsH5EventCallback(t,r,e||"")},c.on=function(t,r,e){var i=this;return t===u||t===h.PaymentCallback?f(m(n.prototype),"on",this).call(this,t,r,e):(this.debug("register ".concat(String(t),": ").concat(e)),f(m(n.prototype),"on",this).call(this,t,function(p,s){i.h5ConfirmHandleEvent(p,t,e),r(s)},e))},c.once=function(t,r,e){var i=this;return t===u?f(m(n.prototype),"once",this).call(this,t,r,e):(this.debug("register once ".concat(String(t),": ").concat(e)),f(m(n.prototype),"once",this).call(this,t,function(p,s){i.h5ConfirmHandleEvent(p,t,e),r(s)},e))},n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}(I);function O(a){l.getInstance().on(u,a)}function _(a){l.getInstance().emit(u,a)}window.onNativeMessage=function(a,o){return function(n){_({serialId:a,actionName:o,result:n})}},window.zaloJSV2={zalo_h5_event_handler:function(a,o,n){var c=v("zmp:zalo_h5_event_handler");c("eventId: ".concat(a,", eventName: ").concat(o,", eventData: ").concat(n));var t=w(n);c("stringToData",t);var r=function(e,i){try{if(e===h.OpenApp){var p=i.url,s=new URL(p),g=s.pathname.split("/zapps/".concat(z))[1];return{path:"".concat(g||"/").concat(s.search)}}return i}catch{return i}}(o,t);l.getInstance().emit(o,a,r)}},window.zaloNative2JS={nativeCall:function(a,o,n){l.getInstance().emit(h.PaymentCallback,a,o,n)}};export{_ as f,l as p,O as u};
