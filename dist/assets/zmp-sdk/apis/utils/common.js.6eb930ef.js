import{t as s}from"../external/@swc/helpers/src/_async_to_generator.mjs.js.ae57f58a.js";import{o as m}from"../external/@swc/helpers/src/_type_of.mjs.js.029dfe98.js";import{n as g}from"../constants.js.9c557f4a.js";import{n as v}from"./debug.js.6107acba.js";import{u}from"./lodash.js.932cc367.js";import{A as a}from"../common/token.js.8e734816.js";import{s as d}from"../appEnv/getEnv.js.06c427cb.js";import{e as f}from"../external/tslib/tslib.es6.js.20b0ea63.js";var c=v("zmp:utils:common"),l=function(n){if(u.isObject(JSON)&&JSON.stringify)return JSON.stringify(n);if(n===void 0)return"undefined";if(n===null)return"null";try{if(typeof n=="string"||n.constructor.toString().match(/string/i)!==null)return'"'+n.replace(/"/g,'\\"')+'"'}catch(o){console.log(o)}var r;if(Object.prototype.toString.call(n).match(/array/i)!==null){r=[];for(var t=n.length,e=0;e<t;e++)r.push(l(n[e]));return"["+r.join(",")+"]"}if(typeof n=="object"){for(var i in r=[],n)r.push('"'+i+'":'+l(n[i]));return"{"+r.join(",")+"}"}return n.toString()},J=function(n){var r,t,e=g[n],i=((r=d())===null||r===void 0?void 0:r.zaloVersion)||0,o="versionLive"in e&&(e==null||(t=e.versionLive)===null||t===void 0?void 0:t.iOS)||0;return!!(Array.isArray(window.ignoreCheckSupport)&&window.ignoreCheckSupport.length>0&&window.ignoreCheckSupport.includes(n))||Number(i)>=o},C=function(n){try{if(n){c(n);var r=n.replace(/\\/g,"").replace(/&#39;/g,"'");try{r=decodeURIComponent(atob(n))}catch{}return c("formattedValue",r,JSON.parse(r),m(JSON.parse(r))),JSON.parse(r)}return null}catch(t){return c("parse json error:",t),n}},A=function(n){if(u.isObject(JSON)&&JSON.parse&&u.isString(n)){var r=n.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\x00/g,"");return JSON.parse(r,function(t,e){return e})}return u.isObject(n)?n:new Function("return "+n)()};function k(n){return n.map(function(r,t){var e=r.path.length>0?r.path.map(function(i,o){return o>0?"[".concat(i,"]"):i}).join(""):"arg";return"Error ".concat(t+1,": Code: ").concat(r.code," ~ Path: ").concat(e," ~ Message: ").concat(r.message)}).join(" | ")}var p,P=function(n){if(n!==void 0){var r=a.miniProgramConfig;return((r==null?void 0:r.dynamicApis)||[]).find(function(t){return t.action===n&&t.clientHandle===!1})}},x=function(n){if(n===void 0)return!1;var r=a.miniProgramConfig;return((r==null?void 0:r.requiredAuthenList)||[]).indexOf(n)>=0},L=(p=s(function(){return f(this,function(n){return[2,new Promise(function(){var r=s(function(t,e){var i;return f(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,a.jumpAndGetToken()];case 1:return o.sent(),i=a.miniProgramConfig,t((i==null?void 0:i.canUseAccessTokenByDefault)===!0),[3,3];case 2:return o.sent(),t(!1),[3,3];case 3:return[2]}})});return function(t,e){return r.apply(this,arguments)}}())]})}),function(){return p.apply(this,arguments)});export{P as O,x as b,C as f,J as l,A as m,l as p,k as v,L as w};
