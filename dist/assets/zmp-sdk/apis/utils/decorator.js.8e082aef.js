import{a as g}from"../external/@swc/helpers/src/_to_consumable_array.mjs.js.e530eefa.js";import{v as w}from"./common.js.6eb930ef.js";import{r as m}from"./errorHandler.js.2edec4c2.js";import{u as o}from"./lodash.js.932cc367.js";import{o as F}from"./response.js.7db2e312.js";function E(e,v,r,y){var c,l,f=Array.isArray(r)&&r.length>0&&((c=r[0])===null||c===void 0?void 0:c.success),t=Array.isArray(r)&&r.length>0&&((l=r[0])===null||l===void 0?void 0:l.fail);try{var h=r;v.length>0&&v.forEach(function(n,a){var i=n.safeParse(r[a]);if(!i.success){var s,d=(s=i.error)===null||s===void 0?void 0:s.issues,A=w(d),p=F.error.badRequest(A);throw p.detail=d,m(p,e)}h.push(i.data)});var u=y.apply(void 0,g(h));return o.isPromise(u)?new Promise(function(n,a){u.then(function(i){if(!o.isNull(f)&&o.isFunction(f))return f(i);n(u)}).catch(function(i){var s=m(i,e);if(!o.isNull(t)&&o.isFunction(t))return t(s);a(s)})}):u}catch(n){if(!o.isNull(t)&&o.isFunction(t))return t(n);throw m(n,e)}}export{E as e};
